(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-app-ex/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"0c0d":function(t,e,a){"use strict";var n=a("3020"),s=a.n(n);s.a},"1feb":function(t,e,a){},"22de":function(t,e,a){"use strict";var n=a("8319"),s=a.n(n);s.a},"25e6":function(t,e,a){},3020:function(t,e,a){},"452c":function(t,e,a){},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("db4d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},o=[],r={name:"app",components:{}},i=r,l=(a("034f"),a("b0a0"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,null,null),u=c.exports,d=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-layout",attrs:{"align-center":"","justify-start":"",column:""}},[a("v-layout",{staticClass:"main-header",attrs:{row:"","justify-end":""}},[t._v(" Приветствую, "+t._s(this.roleMap[t.role]+" "+t.login)+" ")]),a("v-layout",{staticClass:"main-tabs"},[a("v-flex",{attrs:{xs7:"",md6:""}},[a("v-tabs",{attrs:{left:"",height:"40",color:"#322b52","slider-color":"#FFD82B","show-arrows":""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},t._l(t.items,(function(e,n){return a("v-tab",{key:n,attrs:{disabled:e.disable}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("v-flex",{attrs:{xs5:"",md6:""}},[a("v-layout",{attrs:{"align-content-end":"","justify-end":""}},[a("div",{staticClass:"custom-btn user-btn",on:{click:t.changeUser}},[a("span",[t._v("Сменить пользователя")])])])],1)],1),a("v-layout",{staticClass:"tab-item-wrapper",attrs:{column:""}},["agent"===t.role?a("v-tabs-items",{attrs:{touchless:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",{attrs:{touchless:""}},[a("reports")],1),a("v-tab-item",{attrs:{touchless:""}},[a("missions")],1)],1):t._e(),"master"===t.role?a("v-tabs-items",{attrs:{touchless:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",{attrs:{touchless:""}},[a("agents")],1),a("v-tab-item",{attrs:{touchless:""}},[a("reports")],1),a("v-tab-item",{attrs:{touchless:""}},[a("missions")],1)],1):t._e()],1),a("DialogChooseUser",{attrs:{login:t.login},on:{getUserInfo:t.getUserInfo},model:{value:t.showChooseUserDialog,callback:function(e){t.showChooseUserDialog=e},expression:"showChooseUserDialog"}})],1)},m=[],h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-layout",{attrs:{row:"","justify-start":"","align-baseline":""}},[a("p",[t._v("Поиск за период с")]),a("v-flex",{attrs:{md2:""}},[a("v-menu",{ref:"menuStart",attrs:{"close-on-content-click":!1,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({staticClass:"mx-2",attrs:{clearable:"","append-icon":"event",readonly:""},model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}},n))]}}]),model:{value:t.menuStart,callback:function(e){t.menuStart=e},expression:"menuStart"}},[a("v-date-picker",{attrs:{max:t.maxStartDate,"no-title":""},on:{input:function(e){t.menuStart=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("p",[t._v("по")]),a("v-flex",{attrs:{md2:""}},[a("v-menu",{ref:"menuEnd",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({staticClass:"mx-2",attrs:{clearable:"","append-icon":"event",readonly:""},model:{value:t.endDateFormatted,callback:function(e){t.endDateFormatted=e},expression:"endDateFormatted"}},n))]}}]),model:{value:t.menuEnd,callback:function(e){t.menuEnd=e},expression:"menuEnd"}},[a("v-date-picker",{attrs:{min:t.startDate,max:t.today,"no-title":""},on:{input:function(e){t.menuEnd=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)],1),a("v-data-table",{staticClass:"custom-table",attrs:{headers:t.headers,items:t.resultRows,pagination:t.pagination,"items-per-page":5},on:{"update:items":function(e){t.resultRows=e},"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,(function(e){return a("th",{key:e.text,class:["table-headers",e.sortable?"column sortable":"",t.pagination.descending?"desc":"asc",e.value===t.pagination.sortBy?"active":""],style:{textAlign:e.align},on:{click:function(a){return t.changeSort(e)}}},[a("span",{domProps:{innerHTML:t._s(e.text)}}),e.sortable?a("v-icon",{attrs:{small:""}},[t._v("arrow_upward")]):t._e()],1)})),0)]}},{key:"items",fn:function(e){return[a("td",[a("span",{class:t.isReportOwn(e.item)?"own-report":"",on:{click:function(a){t.isReportOwn(e.item)&&t.editReport(e.item)}}},[t._v(t._s(t._f("noData")(e.item.title))+" ")])]),a("td",[t._v(" "+t._s(e.item.author)+" ")]),a("td",[t._v(" "+t._s(t.dateFormatTime(e.item.create_date))+" ")]),a("td",[a("a",{on:{click:function(a){return t.getFile(e.item.file_url)}}},[a("v-icon",{attrs:{color:"primary"}},[t._v("vertical_align_bottom")]),t._v(" Скачать отчет ")],1)])]}}])}),a("dialog-report",{attrs:{report:t.currentReport,action:"edit"},on:{updateReport:t.updateReport},model:{value:t.showDialogReport,callback:function(e){t.showDialogReport=e},expression:"showDialogReport"}}),a("notifications",{attrs:{group:"get-file",position:"bottom center",classes:"n-light custom-notification",max:3,width:400}})],1)},p=[],b=(a("4de4"),a("4160"),a("0d03"),a("159b"),a("c1df")),g=a.n(b),v=a("2ef0"),j=a.n(v),_=[{id:1,title:"Aquila Rift 43.05",author:"Varys",create_date:"2019-11-05T16:40:01.356",file_url:"https://b1.gmbox.ru/c/122301.jpg"},{id:2,title:"Aquila Rift 43.04",author:"Mark",create_date:"2019-11-11T16:23:34.407",file_url:"https://b1.gmbox.ru/c/122301.jpg"},{id:3,title:"Sur'Kesh 12",author:"Peter",create_date:"2019-11-01T17:52:03.868",file_url:129},{id:4,title:"Marsyk 52.1",author:"Peter",create_date:"2019-11-03T15:19:30.952",file_url:"https://b1.gmbox.ru/c/122301.jpg"},{id:5,title:"Fire Nod 32.9",author:"Zen",create_date:"2019-11-03T15:14:47.724",file_url:"https://b1.gmbox.ru/c/122301.jpg"},{id:6,title:"Winter Blade 11.35",author:"Zen",create_date:"2019-11-09T15:14:47.724",file_url:"https://b1.gmbox.ru/c/122301.jpg"}],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{lazy:"",persistent:"",width:"600"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",{staticClass:"report-card pa-3"},[a("v-card-title",{staticClass:"font-weight-bold pa-0 pb-4"},[a("v-flex",{staticStyle:{"font-size":"larger"},attrs:{"align-self-center":"",md6:""}},[t._v(" "+t._s("create"===t.action?"Создать отчет":"Редактировать отчет")+" ")]),a("v-spacer"),a("v-icon",{on:{click:t.closeCard}},[t._v("close")])],1),a("v-card-text",{staticClass:"pa-0"},[a("v-layout",{staticClass:"pa-0 mb-2 report-field",attrs:{row:""}},[a("v-flex",{staticClass:"name-font",attrs:{md4:"",xs4:""}},[a("span",[t._v("Название")])]),a("v-flex",{staticClass:"value-font",attrs:{md8:"",xs8:""}},[a("v-text-field",{attrs:{"hide-details":"",disabled:""},model:{value:t.reportInternal.title,callback:function(e){t.$set(t.reportInternal,"title",e)},expression:"reportInternal.title"}})],1)],1),a("v-layout",{staticClass:"pa-0 mb-2 report-field",attrs:{row:""}},[a("v-flex",{staticClass:"name-font",attrs:{md4:"",xs4:""}},[a("span",[t._v("Автор")])]),a("v-flex",{staticClass:"value-font",attrs:{md8:"",xs8:""}},[a("v-text-field",{attrs:{"hide-details":"",disabled:""},model:{value:t.reportInternal.author,callback:function(e){t.$set(t.reportInternal,"author",e)},expression:"reportInternal.author"}})],1)],1),a("v-layout",{staticClass:"pa-0 mb-2 report-field",attrs:{row:""}},[a("v-flex",{staticClass:"name-font",attrs:{md4:"",xs4:""}},[a("span",[t._v("Комментарий")])]),a("v-flex",{staticClass:"value-font",attrs:{md8:"",xs8:""}},[a("v-textarea",{attrs:{"auto-grow":"",rows:"1","hide-details":"",disabled:""},model:{value:t.reportInternal.comment,callback:function(e){t.$set(t.reportInternal,"comment",e)},expression:"reportInternal.comment"}})],1)],1)],1),a("v-card-actions",[a("v-layout",{staticClass:"pt-3",attrs:{column:""}},[a("v-layout",{attrs:{row:""}},[a("v-spacer"),a("v-btn",{attrs:{color:"",flat:""},on:{click:t.closeCard}},[t._v("Отмена")]),a("v-btn",{attrs:{color:"primary",disabled:!t.validForm},on:{click:t.save}},[t._v("Сохранить")])],1)],1)],1)],1)],1)},w=[],x={name:"DialogReport",props:["value","action","report"],data:function(){return{reportInternal:{title:"",author:"",comment:""}}},filters:{noData:function(t){return null==t||""==t?"-":t}},computed:{show:{set:function(t){this.$emit("input",t)},get:function(){return this.value}},validForm:function(){return this.reportInternal.title}},watch:{report:function(t){this.reportInternal=Object.assign({},t)},show:function(t){t&&(this.reportInternal=Object.assign({},this.report))}},mounted:function(){},methods:{closeCard:function(){this.show=!1,this.reportInternal={}},save:function(){console.log("save"),this.$emit("updateReport",this.reportInternal),this.closeCard()}}},k=x,D=(a("5b0d"),Object(l["a"])(k,y,w,!1,null,"a1143c84",null)),C=D.exports,R={name:"Reports",components:{DialogReport:C},data:function(){return{pagination:{sortBy:"title",descending:!0,rowsPerPage:10},loading:!1,pages:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],headers:[{text:"Название",align:"center",value:"title",sortable:!0},{text:"Автор",align:"center",value:"author",sortable:!0},{text:"Дата создания",align:"center",value:"create_date",sortable:!0},{text:"Файл",align:"center",value:"url",sortable:!1}],reports:[],currentReport:{},menuStart:!1,menuEnd:!1,startDate:null,endDate:null,startDateFormatted:null,endDateFormatted:null,showDialogReport:!1}},mounted:function(){this.getData()},watch:{startDate:function(t){this.startDateFormatted=this.formatDate(t)},endDate:function(t){this.endDateFormatted=this.formatDate(t)},startDateFormatted:function(t){null==t&&(this.startDate=null)},endDateFormatted:function(t){null==t&&(this.endDate=null)}},computed:{today:function(){return g.a.utc(new Date).format()},resultRows:function(){return null==this.startDate&&null==this.endDate?this.reports:null!=this.startDate&&null!=this.endDate?O(this.reports,this.startDate,this.endDate):null!=this.startDate?S(this.reports,this.startDate):null!=this.endDate?$(this.reports,this.endDate):this.reports},maxStartDate:function(){return this.endDate?this.endDate:this.today}},methods:{getFile:function(t){window.open(t)},showFileNtfc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="Ошибка получения файла";this.$notify({group:t,text:a,type:e,duration:3e3})},getData:function(){this.reports=_},isReportOwn:function(t){return t.author===this.$store.getters.getLogin},editReport:function(t){this.currentReport=t,this.showDialogReport=!0},updateReport:function(t){var e=this;this.currentReport=null,this.reports.forEach((function(a,n){a.id===t.id&&(e.reports[n]=Object.assign({},t))}))},dateFormatTime:function(t){return t?g()(t).format("DD.MM.YYYY HH:MM"):null},formatDate:function(t){if(t)return g()(t).format("DD.MM.YYYY")},changeSort:function(t){t.sortable&&(this.pagination.sortBy===t.value?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t.value,this.pagination.descending=!1))}}};function O(t,e,a){var n=g.a.utc(a).subtract(0,"days").endOf("day").format(),s=g.a.utc(e).subtract(0,"days").startOf("day").format();return console.log("end: "+n),console.log("start: "+s),console.log("report.create_date: "+t[0].create_date),j.a.filter(t,(function(t){return g.a.utc(t.create_date).isSameOrAfter(s)&&g.a.utc(t.create_date).isSameOrBefore(n)}))}function S(t,e){var a=g.a.utc(e).subtract(0,"days").startOf("day").format();return j.a.filter(t,(function(t){return g.a.utc(t.create_date).isSameOrAfter(a)}))}function $(t,e){var a=g.a.utc(e).subtract(0,"days").endOf("day").format();return j.a.filter(t,(function(t){return g.a.utc(t.create_date).isSameOrBefore(a)}))}var M=R,z=(a("fdc6"),Object(l["a"])(M,h,p,!1,null,null,null)),F=z.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-0 ma-0",staticStyle:{height:"100%",background:"#fff"},attrs:{"full-screen":"",fluid:""}},[a("v-data-table",{staticClass:"elevation-1 custom-table",attrs:{headers:t.headers,items:t.agents,search:t.search,loading:t.loading,"rows-per-page-items":t.pages,pagination:t.pagination,"item-key":"name"},on:{"update:items":function(e){t.agents=e},"update:search":function(e){t.search=e},"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",t._l(e.headers,(function(e){return a("th",{key:e.text,staticClass:"table-headers",class:["column sortable",t.pagination.descending?"desc":"asc",e.value===t.pagination.sortBy?"active":""],style:{textAlign:e.align},on:{click:function(a){return t.changeSort(e.value)}}},[a("span",{domProps:{innerHTML:t._s(e.text)}}),e.sortable?a("v-icon",{attrs:{small:""}},[t._v("arrow_upward")]):t._e()],1)})),0)]}},{key:"items",fn:function(e){return[a("td",[t._v(t._s(t._f("noData")(e.item.name)))]),a("td",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(n){var s=n.on;return[a("div",t._g({staticClass:"table-cell-clickable"},s),[t._v(" "+t._s(t._f("noData")(e.item.role))+" ")])]}}],null,!0)},[a("v-list",t._l(t.roles,(function(n,s){return a("v-list-tile",{key:s,staticClass:"custom-list",on:{click:function(a){return t.chooseRole(e.item.login,n.label)}}},[a("v-list-tile-title",[t._v(t._s(n.label))])],1)})),1)],1)],1),a("td",[t._v(t._s(t._f("noData")(e.item.rank)))]),a("td",[t._v(t._s(t._f("noData")(e.item.missions_succeed)))]),a("td",[t._v(t._s(t._f("noData")(e.item.missions_failed)))]),a("td",[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(n){var s=n.on;return[a("v-icon",t._g({staticClass:"icon-btn",attrs:{color:"accent"}},s),[t._v(t._s(e.item.isCalled?"flash_on":"flash_off"))])]}}],null,!0)},[a("menu-mark-agent",{attrs:{"agent-login":e.item.login,"is-called-now":e.item.isCalled},on:{changeCall:function(a){return t.changeCallStatus(e.item)},notification:t.showMarkNtfc}})],1)],1)])]}}])}),a("notifications",{attrs:{group:"agent-mark",position:"bottom center",classes:"n-light custom-notification",max:3,width:400}}),a("notifications",{attrs:{group:"change-role",position:"bottom center",classes:"n-light custom-notification",max:3,width:400}})],1)},A=[],I=(a("99af"),[{name:"Leo",role:"master",rank:2,missions_succeed:129,missions_failed:8,isCalled:!1},{name:"Mark",role:"agent",rank:16,missions_succeed:55,missions_failed:4,isCalled:!0},{name:"Ophelia",role:"agent",rank:19,missions_succeed:48,missions_failed:5,isCalled:!0},{name:"Varys",role:"agent",rank:14,missions_succeed:69,missions_failed:4,isCalled:!1},{name:"Lorana",role:"master",rank:4,missions_succeed:111,missions_failed:6,isCalled:!1},{name:"Zen",role:"agent",rank:22,missions_succeed:20,missions_failed:2,isCalled:!0},{name:"Peter",role:"agent",rank:24,missions_succeed:18,missions_failed:3,isCalled:!1}]),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"pa-2 cardDialog",attrs:{width:"350"}},[a("v-card-title",{staticClass:"cardTitle"},[a("span",[t._v("Внимание")])]),a("v-card-text",[a("div",[t._v("Вы точно хотите "+t._s(t.isCalledNow?"снять отметку с агента ":"отметить агента ")+t._s(t.agentLogin)+"?")])]),a("v-card-actions",[a("v-layout",{attrs:{"align-center":"","justify-space-between":"",row:"","fill-height":""}},[a("v-btn",{staticClass:"cardBtn",attrs:{color:"#fefdf3"}},[t._v("Нет")]),a("v-btn",{staticClass:"cardBtn btnAction",attrs:{color:"#E54D42"},on:{click:t.action}},[t._v("Да")])],1)],1)],1)},E=[],P=(a("d3b7"),{name:"MenuMarkAgent",components:{},props:{login:null,isCalledNow:null},data:function(){return{}},watch:{},computed:{agentLogin:function(){return this.login||null}},methods:{action:function(){this.$emit("changeCall")},switchBlockUser:function(t,e){var a=this,n={is_enabled:!e};this.$axios.patch("/v_users",n,{params:{login:"eq.".concat(t)}}).then((function(){a.$emit("notification","user-block","success",t,e)})).catch((function(n){console.log(n.data.message),a.$emit("notification","user-block","error",t,e)})).finally((function(){console.log("finally"),a.$emit("updateData")}))}}}),B=P,T=(a("f98d"),a("58e8"),Object(l["a"])(B,L,E,!1,null,"cb19aa60",null)),Y=T.exports,N={name:"Users",components:{MenuMarkAgent:Y},data:function(){return{pagination:{sortBy:"name"},search:"",loading:!1,pages:[10,25,50,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],headers:[{text:"Имя",align:"center",value:"name",sortable:!0},{text:"Уровень",align:"center",value:"role",sortable:!0},{text:"Ранг",align:"center",value:"rank",sortable:!0},{text:"Успешные миссии",align:"center",value:"missions_succeed",sortable:!0},{text:"Проваленные миссии",align:"center",value:"missions_failed",sortable:!0},{text:"Отметить",align:"center",value:"is_enabled",sortable:!1}],agents:[],roles:[{label:"Мастер",nm:"master"},{label:"Агент",nm:"agent"}],showEditReportDialog:!1}},filters:{noData:function(t){return null==t||""===t?"Никогда":t}},mounted:function(){this.getAgents()},computed:{},watch:{},methods:{changeCallStatus:function(t){t.isCalled=!t.isCalled},showMarkNtfc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s="",o=n?"за":"раз",r=n?"":"раз";switch(e){case"success":s="Пользователь ".concat(a," успешно ").concat(o,"блокирован");break;case"error":s="Ошибка ".concat(r,"блокировки пользователя")}this.$notify({group:t,text:s,type:e,duration:3e3})},showPassNtfc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;console.log("ntfc");var n="";switch(e){case"success":n="Пароль"+(a?" пользователя ".concat(a):"")+" успешно изменен";break;case"error":n="Ошибка смены пароля"}this.$notify({group:t,text:n,type:e,duration:3e3})},showRoleNtfc:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="";switch(e){case"success":a="Группа успешно изменена";break;case"error":a="Не удалось назначить выбранную группу"}this.$notify({group:t,text:a,type:e,duration:3e3})},getAgents:function(){this.loading=!0,this.agents=I,this.loading=!1},chooseRole:function(t,e){},changeSort:function(t){this.pagination.sortBy===t?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=t,this.pagination.descending=!1)},dateFormatDay:function(t){return t?g()(t).locale("ru").format("DD.MM.YYYY"):null},dateFormatTime:function(t){return t?g()(t).locale("ru").format("DD.MM.YYYY hh:mm"):null}}},q=N,H=(a("8bea"),a("b4c6"),a("0c0d"),Object(l["a"])(q,U,A,!1,null,"40eadb21",null)),V=H.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},G=[],J={name:"Missions"},K=J,W=Object(l["a"])(K,Z,G,!1,null,"86e787f4",null),Q=W.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{lazy:"",persistent:"",width:"500"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",{staticClass:"dialog-card pa-3"},[a("v-card-title",{staticClass:"font-weight-bold pa-0"},[a("v-flex",{staticStyle:{"font-size":"larger"},attrs:{"align-self-start":"",md6:""}},[a("span",[t._v("Выбрать пользователя")])]),a("v-spacer"),a("v-icon",{on:{click:t.closeCard}},[t._v("close")])],1),a("v-card-text",{staticClass:"pa-3"},[a("v-layout",{staticClass:"main-block-dialog"},[a("v-select",{attrs:{items:t.userList,"single-line":"","item-text":"name","item-value":"name"},model:{value:t.chosenUser,callback:function(e){t.chosenUser=e},expression:"chosenUser"}})],1)],1)],1)],1)},tt=[],et=(a("7db0"),a("b0c0"),{name:"DialogChooseUser",props:["value"],data:function(){return{userList:[],chosenUser:this.$store.getters.getLogin}},computed:{show:{set:function(t){this.$emit("input",t)},get:function(){return this.value}}},watch:{chosenUser:function(t){if(t){var e=this.userList.find((function(e){return e.name===t}));this.$store.dispatch("setRole",e.role),this.$store.dispatch("setLogin",e.name),this.closeCard(),this.$emit("getUserInfo")}}},mounted:function(){this.userList=I,this.chosenUser=this.$store.getters.getLogin},methods:{closeCard:function(){this.show=!1}}}),at=et,nt=(a("8349"),Object(l["a"])(at,X,tt,!1,null,null,null)),st=nt.exports,ot={name:"Main",components:{Reports:F,Agents:V,Missions:Q,DialogChooseUser:st},data:function(){return{tabs:0,showChooseUserDialog:!1,role:this.$store.getters.getRole,login:this.$store.getters.getLogin,roleMap:{agent:"Агент",master:"Мастер"}}},mounted:function(){this.getUserInfo()},updated:function(){this.getUserInfo()},watch:{role:function(){this.tabs=null},items:function(){}},computed:{items:function(){switch(this.role){case"agent":return[{name:"ОТЧЕТЫ",disable:!1},{name:"МИССИИ",disable:!1}];case"master":return[{name:"АГЕНТЫ",disable:!1},{name:"ОТЧЕТЫ",disable:!1},{name:"МИССИИ",disable:!1}];default:return[]}}},methods:{changeUser:function(){this.showChooseUserDialog=!0},getUserInfo:function(){this.role=this.$store.getters.getRole,this.login=this.$store.getters.getLogin},getRoleLabel:function(t){return this.roleMap[t]}}},rt=ot,it=(a("22de"),Object(l["a"])(rt,f,m,!1,null,null,null)),lt=it.exports;n["default"].use(d["a"]);var ct=new d["a"]({routes:[{path:"/",name:"Main",component:lt},{path:"/",name:"Reports",component:F},{path:"/",name:"Agents",component:V},{path:"*",redirect:"/"}]}),ut=a("2f62"),dt={isAuth:!1,login:"Varys",role:"agent"},ft={setLogin:function(t,e){t.login=e},setRole:function(t,e){t.role=e},setAuth:function(t,e){t.isAuth=!0},clearAuth:function(t){t.isAuth=!1,t.login=null,t.role=null}},mt={setLogin:function(t,e){var a=t.commit;a("setLogin",e)},setRole:function(t,e){var a=t.commit;a("setRole",e)},userSignOut:function(t){var e=t.commit;e("clearAuth"),ct.push("/login")}},ht={getLogin:function(t){return t.login},getRole:function(t){return t.role},isAuth:function(t){return t.isAuth}};n["default"].use(ut["a"]);var pt=new ut["a"].Store({state:dt,mutations:ft,actions:mt,getters:ht}),bt=pt,gt=a("ce5b"),vt=a.n(gt),jt=(a("da64"),a("bf40"),a("2992")),_t=a.n(jt),yt=a("da5b"),wt=a.n(yt),xt=(a("bc3a"),a("ee98")),kt=a.n(xt);a("d1e78");n["default"].use(kt.a),n["default"].config.productionTip=!1,n["default"].use(vt.a,{lang:{locales:{ru:_t.a,en:wt.a},current:"ru"},theme:{primary:"#322b52",secondary:"#FFD82B",accent:"#b71c1c",error:"#b71c1c"},iconfont:"mdi"}),new n["default"]({router:ct,store:bt,render:function(t){return t(u)}}).$mount("#app")},"58e8":function(t,e,a){"use strict";var n=a("a465"),s=a.n(n);s.a},"5b0d":function(t,e,a){"use strict";var n=a("9b3b"),s=a.n(n);s.a},8319:function(t,e,a){},8349:function(t,e,a){"use strict";var n=a("1feb"),s=a.n(n);s.a},"85ec":function(t,e,a){},"8bea":function(t,e,a){"use strict";var n=a("d6a3"),s=a.n(n);s.a},"9b3b":function(t,e,a){},a465:function(t,e,a){},b0a0:function(t,e,a){"use strict";var n=a("452c"),s=a.n(n);s.a},b4c6:function(t,e,a){"use strict";var n=a("c5a2"),s=a.n(n);s.a},ba57:function(t,e,a){},c5a2:function(t,e,a){},d6a3:function(t,e,a){},f98d:function(t,e,a){"use strict";var n=a("25e6"),s=a.n(n);s.a},fdc6:function(t,e,a){"use strict";var n=a("ba57"),s=a.n(n);s.a}});
//# sourceMappingURL=app.908e0eae.js.map